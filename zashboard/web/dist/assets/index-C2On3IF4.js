var _s=Object.defineProperty;var vs=(e,t,n)=>t in e?_s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ft=(e,t,n)=>vs(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function F(){}function Fe(e,t){for(const n in t)e[n]=t[n];return e}function Zn(e){return e()}function xt(){return Object.create(null)}function se(e){e.forEach(Zn)}function Ot(e){return typeof e=="function"}function ie(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ys(e){return Object.keys(e).length===0}function Tt(e,...t){if(e==null){for(const s of t)s(void 0);return F}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Rt(e){let t;return Tt(e,n=>t=n)(),t}function oe(e,t,n){e.$$.on_destroy.push(Tt(t,n))}function We(e,t,n,s){if(e){const o=Qn(e,t,n,s);return e[0](o)}}function Qn(e,t,n,s){return e[1]&&s?Fe(n.ctx.slice(),e[1](s(t))):n.ctx}function Xe(e,t,n,s){if(e[2]&&s){const o=e[2](s(n));if(t.dirty===void 0)return o;if(typeof o=="object"){const i=[],r=Math.max(t.dirty.length,o.length);for(let l=0;l<r;l+=1)i[l]=t.dirty[l]|o[l];return i}return t.dirty|o}return t.dirty}function xe(e,t,n,s,o,i){if(o){const r=Qn(t,n,s,i);e.p(r,o)}}function et(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let s=0;s<n;s++)t[s]=-1;return t}return-1}function en(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function tn(e){return e??""}const Jn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function p(e,t){e.appendChild(t)}function O(e,t,n){e.insertBefore(t,n||null)}function C(e){e.parentNode&&e.parentNode.removeChild(e)}function At(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function y(e){return document.createElement(e)}function ws(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function $(e){return document.createTextNode(e)}function E(){return $(" ")}function Pe(){return $("")}function V(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function ks(e){return function(t){return t.preventDefault(),e.call(this,t)}}function g(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const Ss=["width","height"];function nn(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const s in t)t[s]==null?e.removeAttribute(s):s==="style"?e.style.cssText=t[s]:s==="__value"?e.value=e[s]=t[s]:n[s]&&n[s].set&&Ss.indexOf(s)===-1?e[s]=t[s]:g(e,s,t[s])}function sn(e,t){for(const n in t)g(e,n,t[n])}function Is(e){return Array.from(e.childNodes)}function Z(e,t){t=""+t,e.data!==t&&(e.data=t)}function pe(e,t,n){e.classList.toggle(t,!!n)}function Es(e,t,{bubbles:n=!1,cancelable:s=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:s})}let He;function Ue(e){He=e}function Pt(){if(!He)throw new Error("Function called outside component initialization");return He}function Lt(e){Pt().$$.on_mount.push(e)}function Gn(e){Pt().$$.on_destroy.push(e)}function ge(){const e=Pt();return(t,n,{cancelable:s=!1}={})=>{const o=e.$$.callbacks[t];if(o){const i=Es(t,n,{cancelable:s});return o.slice().forEach(r=>{r.call(e,i)}),!i.defaultPrevented}return!0}}const Re=[],bt=[];let Ae=[];const on=[],js=Promise.resolve();let _t=!1;function Cs(){_t||(_t=!0,js.then(Kn))}function vt(e){Ae.push(e)}const dt=new Set;let Oe=0;function Kn(){if(Oe!==0)return;const e=He;do{try{for(;Oe<Re.length;){const t=Re[Oe];Oe++,Ue(t),Ms(t.$$)}}catch(t){throw Re.length=0,Oe=0,t}for(Ue(null),Re.length=0,Oe=0;bt.length;)bt.pop()();for(let t=0;t<Ae.length;t+=1){const n=Ae[t];dt.has(n)||(dt.add(n),n())}Ae.length=0}while(Re.length);for(;on.length;)on.pop()();_t=!1,dt.clear(),Ue(e)}function Ms(e){if(e.fragment!==null){e.update(),se(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(vt)}}function Os(e){const t=[],n=[];Ae.forEach(s=>e.indexOf(s)===-1?t.push(s):n.push(s)),n.forEach(s=>s()),Ae=t}const Ge=new Set;let _e;function ae(){_e={r:0,c:[],p:_e}}function ue(){_e.r||se(_e.c),_e=_e.p}function A(e,t){e&&e.i&&(Ge.delete(e),e.i(t))}function N(e,t,n,s){if(e&&e.o){if(Ge.has(e))return;Ge.add(e),_e.c.push(()=>{Ge.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}function me(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ts(e,t){N(e,1,1,()=>{t.delete(e.key)})}function Rs(e,t,n,s,o,i,r,l,c,a,u,d){let h=e.length,b=i.length,v=h;const m={};for(;v--;)m[e[v].key]=v;const w=[],_=new Map,f=new Map,I=[];for(v=b;v--;){const k=d(o,i,v),L=n(k);let R=r.get(L);R?I.push(()=>R.p(k,t)):(R=a(L,k),R.c()),_.set(L,w[v]=R),L in m&&f.set(L,Math.abs(v-m[L]))}const q=new Set,M=new Set;function S(k){A(k,1),k.m(l,u),r.set(k.key,k),u=k.first,b--}for(;h&&b;){const k=w[b-1],L=e[h-1],R=k.key,P=L.key;k===L?(u=k.first,h--,b--):_.has(P)?!r.has(R)||q.has(R)?S(k):M.has(P)?h--:f.get(R)>f.get(P)?(M.add(R),S(k)):(q.add(P),h--):(c(L,r),h--)}for(;h--;){const k=e[h];_.has(k.key)||c(k,r)}for(;b;)S(w[b-1]);return se(I),w}function Yn(e,t){const n={},s={},o={$$scope:1};let i=e.length;for(;i--;){const r=e[i],l=t[i];if(l){for(const c in r)c in l||(s[c]=1);for(const c in l)o[c]||(n[c]=l[c],o[c]=1);e[i]=l}else for(const c in r)o[c]=1}for(const r in s)r in n||(n[r]=void 0);return n}function ne(e){e&&e.c()}function x(e,t,n){const{fragment:s,after_update:o}=e.$$;s&&s.m(t,n),vt(()=>{const i=e.$$.on_mount.map(Zn).filter(Ot);e.$$.on_destroy?e.$$.on_destroy.push(...i):se(i),e.$$.on_mount=[]}),o.forEach(vt)}function ee(e,t){const n=e.$$;n.fragment!==null&&(Os(n.after_update),se(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function As(e,t){e.$$.dirty[0]===-1&&(Re.push(e),Cs(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function fe(e,t,n,s,o,i,r=null,l=[-1]){const c=He;Ue(e);const a=e.$$={fragment:null,ctx:[],props:i,update:F,not_equal:o,bound:xt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:xt(),dirty:l,skip_bound:!1,root:t.target||c.$$.root};r&&r(a.root);let u=!1;if(a.ctx=n?n(e,t.props||{},(d,h,...b)=>{const v=b.length?b[0]:h;return a.ctx&&o(a.ctx[d],a.ctx[d]=v)&&(!a.skip_bound&&a.bound[d]&&a.bound[d](v),u&&As(e,d)),h}):[],a.update(),u=!0,se(a.before_update),a.fragment=s?s(a.ctx):!1,t.target){if(t.hydrate){const d=Is(t.target);a.fragment&&a.fragment.l(d),d.forEach(C)}else a.fragment&&a.fragment.c();t.intro&&A(e.$$.fragment),x(e,t.target,t.anchor),Kn()}Ue(c)}class de{constructor(){ft(this,"$$");ft(this,"$$set")}$destroy(){ee(this,1),this.$destroy=F}$on(t,n){if(!Ot(n))return F;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const o=s.indexOf(n);o!==-1&&s.splice(o,1)}}$set(t){this.$$set&&!ys(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ps="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ps);const De=/^[a-z0-9]+(-[a-z0-9]+)*$/,ot=(e,t,n,s="")=>{const o=e.split(":");if(e.slice(0,1)==="@"){if(o.length<2||o.length>3)return null;s=o.shift().slice(1)}if(o.length>3||!o.length)return null;if(o.length>1){const l=o.pop(),c=o.pop(),a={provider:o.length>0?o[0]:s,prefix:c,name:l};return t&&!Ke(a)?null:a}const i=o[0],r=i.split("-");if(r.length>1){const l={provider:s,prefix:r.shift(),name:r.join("-")};return t&&!Ke(l)?null:l}if(n&&s===""){const l={provider:s,prefix:"",name:i};return t&&!Ke(l,n)?null:l}return null},Ke=(e,t)=>e?!!((e.provider===""||e.provider.match(De))&&(t&&e.prefix===""||e.prefix.match(De))&&e.name.match(De)):!1,Wn=Object.freeze({left:0,top:0,width:16,height:16}),tt=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),it=Object.freeze({...Wn,...tt}),yt=Object.freeze({...it,body:"",hidden:!1});function Ls(e,t){const n={};!e.hFlip!=!t.hFlip&&(n.hFlip=!0),!e.vFlip!=!t.vFlip&&(n.vFlip=!0);const s=((e.rotate||0)+(t.rotate||0))%4;return s&&(n.rotate=s),n}function rn(e,t){const n=Ls(e,t);for(const s in yt)s in tt?s in e&&!(s in n)&&(n[s]=tt[s]):s in t?n[s]=t[s]:s in e&&(n[s]=e[s]);return n}function Ns(e,t){const n=e.icons,s=e.aliases||Object.create(null),o=Object.create(null);function i(r){if(n[r])return o[r]=[];if(!(r in o)){o[r]=null;const l=s[r]&&s[r].parent,c=l&&i(l);c&&(o[r]=[l].concat(c))}return o[r]}return Object.keys(n).concat(Object.keys(s)).forEach(i),o}function qs(e,t,n){const s=e.icons,o=e.aliases||Object.create(null);let i={};function r(l){i=rn(s[l]||o[l],i)}return r(t),n.forEach(r),rn(e,i)}function Xn(e,t){const n=[];if(typeof e!="object"||typeof e.icons!="object")return n;e.not_found instanceof Array&&e.not_found.forEach(o=>{t(o,null),n.push(o)});const s=Ns(e);for(const o in s){const i=s[o];i&&(t(o,qs(e,o,i)),n.push(o))}return n}const $s={provider:"",aliases:{},not_found:{},...Wn};function ht(e,t){for(const n in t)if(n in e&&typeof e[n]!=typeof t[n])return!1;return!0}function xn(e){if(typeof e!="object"||e===null)return null;const t=e;if(typeof t.prefix!="string"||!e.icons||typeof e.icons!="object"||!ht(e,$s))return null;const n=t.icons;for(const o in n){const i=n[o];if(!o.match(De)||typeof i.body!="string"||!ht(i,yt))return null}const s=t.aliases||Object.create(null);for(const o in s){const i=s[o],r=i.parent;if(!o.match(De)||typeof r!="string"||!n[r]&&!s[r]||!ht(i,yt))return null}return t}const ln=Object.create(null);function Us(e,t){return{provider:e,prefix:t,icons:Object.create(null),missing:new Set}}function ve(e,t){const n=ln[e]||(ln[e]=Object.create(null));return n[t]||(n[t]=Us(e,t))}function Nt(e,t){return xn(t)?Xn(t,(n,s)=>{s?e.icons[n]=s:e.missing.add(n)}):[]}function Ds(e,t,n){try{if(typeof n.body=="string")return e.icons[t]={...n},!0}catch{}return!1}let Be=!1;function es(e){return typeof e=="boolean"&&(Be=e),Be}function Fs(e){const t=typeof e=="string"?ot(e,!0,Be):e;if(t){const n=ve(t.provider,t.prefix),s=t.name;return n.icons[s]||(n.missing.has(s)?null:void 0)}}function Hs(e,t){const n=ot(e,!0,Be);if(!n)return!1;const s=ve(n.provider,n.prefix);return Ds(s,n.name,t)}function Bs(e,t){if(typeof e!="object")return!1;if(typeof t!="string"&&(t=e.provider||""),Be&&!t&&!e.prefix){let o=!1;return xn(e)&&(e.prefix="",Xn(e,(i,r)=>{r&&Hs(i,r)&&(o=!0)})),o}const n=e.prefix;if(!Ke({provider:t,prefix:n,name:"a"}))return!1;const s=ve(t,n);return!!Nt(s,e)}const ts=Object.freeze({width:null,height:null}),ns=Object.freeze({...ts,...tt}),zs=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Vs=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function cn(e,t,n){if(t===1)return e;if(n=n||100,typeof e=="number")return Math.ceil(e*t*n)/n;if(typeof e!="string")return e;const s=e.split(zs);if(s===null||!s.length)return e;const o=[];let i=s.shift(),r=Vs.test(i);for(;;){if(r){const l=parseFloat(i);isNaN(l)?o.push(i):o.push(Math.ceil(l*t*n)/n)}else o.push(i);if(i=s.shift(),i===void 0)return o.join("");r=!r}}const Zs=e=>e==="unset"||e==="undefined"||e==="none";function Qs(e,t){const n={...it,...e},s={...ns,...t},o={left:n.left,top:n.top,width:n.width,height:n.height};let i=n.body;[n,s].forEach(v=>{const m=[],w=v.hFlip,_=v.vFlip;let f=v.rotate;w?_?f+=2:(m.push("translate("+(o.width+o.left).toString()+" "+(0-o.top).toString()+")"),m.push("scale(-1 1)"),o.top=o.left=0):_&&(m.push("translate("+(0-o.left).toString()+" "+(o.height+o.top).toString()+")"),m.push("scale(1 -1)"),o.top=o.left=0);let I;switch(f<0&&(f-=Math.floor(f/4)*4),f=f%4,f){case 1:I=o.height/2+o.top,m.unshift("rotate(90 "+I.toString()+" "+I.toString()+")");break;case 2:m.unshift("rotate(180 "+(o.width/2+o.left).toString()+" "+(o.height/2+o.top).toString()+")");break;case 3:I=o.width/2+o.left,m.unshift("rotate(-90 "+I.toString()+" "+I.toString()+")");break}f%2===1&&(o.left!==o.top&&(I=o.left,o.left=o.top,o.top=I),o.width!==o.height&&(I=o.width,o.width=o.height,o.height=I)),m.length&&(i='<g transform="'+m.join(" ")+'">'+i+"</g>")});const r=s.width,l=s.height,c=o.width,a=o.height;let u,d;r===null?(d=l===null?"1em":l==="auto"?a:l,u=cn(d,c/a)):(u=r==="auto"?c:r,d=l===null?cn(u,a/c):l==="auto"?a:l);const h={},b=(v,m)=>{Zs(m)||(h[v]=m.toString())};return b("width",u),b("height",d),h.viewBox=o.left.toString()+" "+o.top.toString()+" "+c.toString()+" "+a.toString(),{attributes:h,body:i}}const Js=/\sid="(\S+)"/g,Gs="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let Ks=0;function Ys(e,t=Gs){const n=[];let s;for(;s=Js.exec(e);)n.push(s[1]);if(!n.length)return e;const o="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(i=>{const r=typeof t=="function"?t(i):t+(Ks++).toString(),l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+l+')([")]|\\.[a-z])',"g"),"$1"+r+o+"$3")}),e=e.replace(new RegExp(o,"g"),""),e}const wt=Object.create(null);function Ws(e,t){wt[e]=t}function kt(e){return wt[e]||wt[""]}function qt(e){let t;if(typeof e.resources=="string")t=[e.resources];else if(t=e.resources,!(t instanceof Array)||!t.length)return null;return{resources:t,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const $t=Object.create(null),qe=["https://api.simplesvg.com","https://api.unisvg.com"],Ye=[];for(;qe.length>0;)qe.length===1||Math.random()>.5?Ye.push(qe.shift()):Ye.push(qe.pop());$t[""]=qt({resources:["https://api.iconify.design"].concat(Ye)});function Xs(e,t){const n=qt(t);return n===null?!1:($t[e]=n,!0)}function Ut(e){return $t[e]}const xs=()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}};let an=xs();function eo(e,t){const n=Ut(e);if(!n)return 0;let s;if(!n.maxURL)s=0;else{let o=0;n.resources.forEach(r=>{o=Math.max(o,r.length)});const i=t+".json?icons=";s=n.maxURL-o-n.path.length-i.length}return s}function to(e){return e===404}const no=(e,t,n)=>{const s=[],o=eo(e,t),i="icons";let r={type:i,provider:e,prefix:t,icons:[]},l=0;return n.forEach((c,a)=>{l+=c.length+1,l>=o&&a>0&&(s.push(r),r={type:i,provider:e,prefix:t,icons:[]},l=c.length),r.icons.push(c)}),s.push(r),s};function so(e){if(typeof e=="string"){const t=Ut(e);if(t)return t.path}return"/"}const oo=(e,t,n)=>{if(!an){n("abort",424);return}let s=so(t.provider);switch(t.type){case"icons":{const i=t.prefix,l=t.icons.join(","),c=new URLSearchParams({icons:l});s+=i+".json?"+c.toString();break}case"custom":{const i=t.uri;s+=i.slice(0,1)==="/"?i.slice(1):i;break}default:n("abort",400);return}let o=503;an(e+s).then(i=>{const r=i.status;if(r!==200){setTimeout(()=>{n(to(r)?"abort":"next",r)});return}return o=501,i.json()}).then(i=>{if(typeof i!="object"||i===null){setTimeout(()=>{i===404?n("abort",i):n("next",o)});return}setTimeout(()=>{n("success",i)})}).catch(()=>{n("next",o)})},io={prepare:no,send:oo};function ro(e){const t={loaded:[],missing:[],pending:[]},n=Object.create(null);e.sort((o,i)=>o.provider!==i.provider?o.provider.localeCompare(i.provider):o.prefix!==i.prefix?o.prefix.localeCompare(i.prefix):o.name.localeCompare(i.name));let s={provider:"",prefix:"",name:""};return e.forEach(o=>{if(s.name===o.name&&s.prefix===o.prefix&&s.provider===o.provider)return;s=o;const i=o.provider,r=o.prefix,l=o.name,c=n[i]||(n[i]=Object.create(null)),a=c[r]||(c[r]=ve(i,r));let u;l in a.icons?u=t.loaded:r===""||a.missing.has(l)?u=t.missing:u=t.pending;const d={provider:i,prefix:r,name:l};u.push(d)}),t}function ss(e,t){e.forEach(n=>{const s=n.loaderCallbacks;s&&(n.loaderCallbacks=s.filter(o=>o.id!==t))})}function lo(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const t=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!t.length)return;let n=!1;const s=e.provider,o=e.prefix;t.forEach(i=>{const r=i.icons,l=r.pending.length;r.pending=r.pending.filter(c=>{if(c.prefix!==o)return!0;const a=c.name;if(e.icons[a])r.loaded.push({provider:s,prefix:o,name:a});else if(e.missing.has(a))r.missing.push({provider:s,prefix:o,name:a});else return n=!0,!0;return!1}),r.pending.length!==l&&(n||ss([e],i.id),i.callback(r.loaded.slice(0),r.missing.slice(0),r.pending.slice(0),i.abort))})}))}let co=0;function ao(e,t,n){const s=co++,o=ss.bind(null,n,s);if(!t.pending.length)return o;const i={id:s,icons:t,callback:e,abort:o};return n.forEach(r=>{(r.loaderCallbacks||(r.loaderCallbacks=[])).push(i)}),o}function uo(e,t=!0,n=!1){const s=[];return e.forEach(o=>{const i=typeof o=="string"?ot(o,t,n):o;i&&s.push(i)}),s}var fo={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function ho(e,t,n,s){const o=e.resources.length,i=e.random?Math.floor(Math.random()*o):e.index;let r;if(e.random){let S=e.resources.slice(0);for(r=[];S.length>1;){const k=Math.floor(Math.random()*S.length);r.push(S[k]),S=S.slice(0,k).concat(S.slice(k+1))}r=r.concat(S)}else r=e.resources.slice(i).concat(e.resources.slice(0,i));const l=Date.now();let c="pending",a=0,u,d=null,h=[],b=[];typeof s=="function"&&b.push(s);function v(){d&&(clearTimeout(d),d=null)}function m(){c==="pending"&&(c="aborted"),v(),h.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),h=[]}function w(S,k){k&&(b=[]),typeof S=="function"&&b.push(S)}function _(){return{startTime:l,payload:t,status:c,queriesSent:a,queriesPending:h.length,subscribe:w,abort:m}}function f(){c="failed",b.forEach(S=>{S(void 0,u)})}function I(){h.forEach(S=>{S.status==="pending"&&(S.status="aborted")}),h=[]}function q(S,k,L){const R=k!=="success";switch(h=h.filter(P=>P!==S),c){case"pending":break;case"failed":if(R||!e.dataAfterTimeout)return;break;default:return}if(k==="abort"){u=L,f();return}if(R){u=L,h.length||(r.length?M():f());return}if(v(),I(),!e.random){const P=e.resources.indexOf(S.resource);P!==-1&&P!==e.index&&(e.index=P)}c="completed",b.forEach(P=>{P(L)})}function M(){if(c!=="pending")return;v();const S=r.shift();if(S===void 0){if(h.length){d=setTimeout(()=>{v(),c==="pending"&&(I(),f())},e.timeout);return}f();return}const k={status:"pending",resource:S,callback:(L,R)=>{q(k,L,R)}};h.push(k),a++,d=setTimeout(M,e.rotate),n(S,t,k.callback)}return setTimeout(M),_}function os(e){const t={...fo,...e};let n=[];function s(){n=n.filter(l=>l().status==="pending")}function o(l,c,a){const u=ho(t,l,c,(d,h)=>{s(),a&&a(d,h)});return n.push(u),u}function i(l){return n.find(c=>l(c))||null}return{query:o,find:i,setIndex:l=>{t.index=l},getIndex:()=>t.index,cleanup:s}}function un(){}const pt=Object.create(null);function po(e){if(!pt[e]){const t=Ut(e);if(!t)return;const n=os(t),s={config:t,redundancy:n};pt[e]=s}return pt[e]}function mo(e,t,n){let s,o;if(typeof e=="string"){const i=kt(e);if(!i)return n(void 0,424),un;o=i.send;const r=po(e);r&&(s=r.redundancy)}else{const i=qt(e);if(i){s=os(i);const r=e.resources?e.resources[0]:"",l=kt(r);l&&(o=l.send)}}return!s||!o?(n(void 0,424),un):s.query(t,o,n)().abort}const fn="iconify2",ze="iconify",is=ze+"-count",dn=ze+"-version",rs=36e5,go=168;function St(e,t){try{return e.getItem(t)}catch{}}function Dt(e,t,n){try{return e.setItem(t,n),!0}catch{}}function hn(e,t){try{e.removeItem(t)}catch{}}function It(e,t){return Dt(e,is,t.toString())}function Et(e){return parseInt(St(e,is))||0}const rt={local:!0,session:!0},ls={local:new Set,session:new Set};let Ft=!1;function bo(e){Ft=e}let Je=typeof window>"u"?{}:window;function cs(e){const t=e+"Storage";try{if(Je&&Je[t]&&typeof Je[t].length=="number")return Je[t]}catch{}rt[e]=!1}function as(e,t){const n=cs(e);if(!n)return;const s=St(n,dn);if(s!==fn){if(s){const l=Et(n);for(let c=0;c<l;c++)hn(n,ze+c.toString())}Dt(n,dn,fn),It(n,0);return}const o=Math.floor(Date.now()/rs)-go,i=l=>{const c=ze+l.toString(),a=St(n,c);if(typeof a=="string"){try{const u=JSON.parse(a);if(typeof u=="object"&&typeof u.cached=="number"&&u.cached>o&&typeof u.provider=="string"&&typeof u.data=="object"&&typeof u.data.prefix=="string"&&t(u,l))return!0}catch{}hn(n,c)}};let r=Et(n);for(let l=r-1;l>=0;l--)i(l)||(l===r-1?(r--,It(n,r)):ls[e].add(l))}function us(){if(!Ft){bo(!0);for(const e in rt)as(e,t=>{const n=t.data,s=t.provider,o=n.prefix,i=ve(s,o);if(!Nt(i,n).length)return!1;const r=n.lastModified||-1;return i.lastModifiedCached=i.lastModifiedCached?Math.min(i.lastModifiedCached,r):r,!0})}}function _o(e,t){const n=e.lastModifiedCached;if(n&&n>=t)return n===t;if(e.lastModifiedCached=t,n)for(const s in rt)as(s,o=>{const i=o.data;return o.provider!==e.provider||i.prefix!==e.prefix||i.lastModified===t});return!0}function vo(e,t){Ft||us();function n(s){let o;if(!rt[s]||!(o=cs(s)))return;const i=ls[s];let r;if(i.size)i.delete(r=Array.from(i).shift());else if(r=Et(o),!It(o,r+1))return;const l={cached:Math.floor(Date.now()/rs),provider:e.provider,data:t};return Dt(o,ze+r.toString(),JSON.stringify(l))}t.lastModified&&!_o(e,t.lastModified)||Object.keys(t.icons).length&&(t.not_found&&(t=Object.assign({},t),delete t.not_found),n("local")||n("session"))}function pn(){}function yo(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,lo(e)}))}function wo(e,t){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(t).sort():e.iconsToLoad=t,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:n,prefix:s}=e,o=e.iconsToLoad;delete e.iconsToLoad;let i;if(!o||!(i=kt(n)))return;i.prepare(n,s,o).forEach(l=>{mo(n,l,c=>{if(typeof c!="object")l.icons.forEach(a=>{e.missing.add(a)});else try{const a=Nt(e,c);if(!a.length)return;const u=e.pendingIcons;u&&a.forEach(d=>{u.delete(d)}),vo(e,c)}catch(a){console.error(a)}yo(e)})})}))}const ko=(e,t)=>{const n=uo(e,!0,es()),s=ro(n);if(!s.pending.length){let c=!0;return t&&setTimeout(()=>{c&&t(s.loaded,s.missing,s.pending,pn)}),()=>{c=!1}}const o=Object.create(null),i=[];let r,l;return s.pending.forEach(c=>{const{provider:a,prefix:u}=c;if(u===l&&a===r)return;r=a,l=u,i.push(ve(a,u));const d=o[a]||(o[a]=Object.create(null));d[u]||(d[u]=[])}),s.pending.forEach(c=>{const{provider:a,prefix:u,name:d}=c,h=ve(a,u),b=h.pendingIcons||(h.pendingIcons=new Set);b.has(d)||(b.add(d),o[a][u].push(d))}),i.forEach(c=>{const{provider:a,prefix:u}=c;o[a][u].length&&wo(c,o[a][u])}),t?ao(t,s,i):pn};function So(e,t){const n={...e};for(const s in t){const o=t[s],i=typeof o;s in ts?(o===null||o&&(i==="string"||i==="number"))&&(n[s]=o):i===typeof n[s]&&(n[s]=s==="rotate"?o%4:o)}return n}const Io=/[\s,]+/;function Eo(e,t){t.split(Io).forEach(n=>{switch(n.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}})}function jo(e,t=0){const n=e.replace(/^-?[0-9.]*/,"");function s(o){for(;o<0;)o+=4;return o%4}if(n===""){const o=parseInt(e);return isNaN(o)?0:s(o)}else if(n!==e){let o=0;switch(n){case"%":o=25;break;case"deg":o=90}if(o){let i=parseFloat(e.slice(0,e.length-n.length));return isNaN(i)?0:(i=i/o,i%1===0?s(i):0)}}return t}function Co(e,t){let n=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const s in t)n+=" "+s+'="'+t[s]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}function Mo(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function Oo(e){return"data:image/svg+xml,"+Mo(e)}function To(e){return'url("'+Oo(e)+'")'}const mn={...ns,inline:!1},Ro={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},Ao={display:"inline-block"},jt={"background-color":"currentColor"},fs={"background-color":"transparent"},gn={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},bn={"-webkit-mask":jt,mask:jt,background:fs};for(const e in bn){const t=bn[e];for(const n in gn)t[e+"-"+n]=gn[n]}function Po(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}function Lo(e,t){const n=So(mn,t),s=t.mode||"svg",o=s==="svg"?{...Ro}:{};e.body.indexOf("xlink:")===-1&&delete o["xmlns:xlink"];let i=typeof t.style=="string"?t.style:"";for(let _ in t){const f=t[_];if(f!==void 0)switch(_){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":n[_]=f===!0||f==="true"||f===1;break;case"flip":typeof f=="string"&&Eo(n,f);break;case"color":i=i+(i.length>0&&i.trim().slice(-1)!==";"?";":"")+"color: "+f+"; ";break;case"rotate":typeof f=="string"?n[_]=jo(f):typeof f=="number"&&(n[_]=f);break;case"ariaHidden":case"aria-hidden":f!==!0&&f!=="true"&&delete o["aria-hidden"];break;default:if(_.slice(0,3)==="on:")break;mn[_]===void 0&&(o[_]=f)}}const r=Qs(e,n),l=r.attributes;if(n.inline&&(i="vertical-align: -0.125em; "+i),s==="svg"){Object.assign(o,l),i!==""&&(o.style=i);let _=0,f=t.id;return typeof f=="string"&&(f=f.replace(/-/g,"_")),{svg:!0,attributes:o,body:Ys(r.body,f?()=>f+"ID"+_++:"iconifySvelte")}}const{body:c,width:a,height:u}=e,d=s==="mask"||(s==="bg"?!1:c.indexOf("currentColor")!==-1),h=Co(c,{...l,width:a+"",height:u+""}),v={"--svg":To(h)},m=_=>{const f=l[_];f&&(v[_]=Po(f))};m("width"),m("height"),Object.assign(v,Ao,d?jt:fs);let w="";for(const _ in v)w+=_+": "+v[_]+";";return o.style=w+i,{svg:!1,attributes:o}}es(!0);Ws("",io);if(typeof document<"u"&&typeof window<"u"){us();const e=window;if(e.IconifyPreload!==void 0){const t=e.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(s=>{try{(typeof s!="object"||s===null||s instanceof Array||typeof s.icons!="object"||typeof s.prefix!="string"||!Bs(s))&&console.error(n)}catch{console.error(n)}})}if(e.IconifyProviders!==void 0){const t=e.IconifyProviders;if(typeof t=="object"&&t!==null)for(let n in t){const s="IconifyProviders["+n+"] is invalid.";try{const o=t[n];if(typeof o!="object"||!o||o.resources===void 0)continue;Xs(n,o)||console.error(s)}catch{console.error(s)}}}}function No(e,t,n,s,o){function i(){t.loading&&(t.loading.abort(),t.loading=null)}if(typeof e=="object"&&e!==null&&typeof e.body=="string")return t.name="",i(),{data:{...it,...e}};let r;if(typeof e!="string"||(r=ot(e,!1,!0))===null)return i(),null;const l=Fs(r);if(!l)return n&&(!t.loading||t.loading.name!==e)&&(i(),t.name="",t.loading={name:e,abort:ko([r],s)}),null;i(),t.name!==e&&(t.name=e,o&&!t.destroyed&&o(e));const c=["iconify"];return r.prefix!==""&&c.push("iconify--"+r.prefix),r.provider!==""&&c.push("iconify--"+r.provider),{data:l,classes:c}}function qo(e,t){return e?Lo({...it,...e},t):null}function _n(e){let t;function n(i,r){return i[0].svg?Uo:$o}let s=n(e),o=s(e);return{c(){o.c(),t=Pe()},m(i,r){o.m(i,r),O(i,t,r)},p(i,r){s===(s=n(i))&&o?o.p(i,r):(o.d(1),o=s(i),o&&(o.c(),o.m(t.parentNode,t)))},d(i){i&&C(t),o.d(i)}}}function $o(e){let t,n=[e[0].attributes],s={};for(let o=0;o<n.length;o+=1)s=Fe(s,n[o]);return{c(){t=y("span"),nn(t,s)},m(o,i){O(o,t,i)},p(o,i){nn(t,s=Yn(n,[i&1&&o[0].attributes]))},d(o){o&&C(t)}}}function Uo(e){let t,n=e[0].body+"",s=[e[0].attributes],o={};for(let i=0;i<s.length;i+=1)o=Fe(o,s[i]);return{c(){t=ws("svg"),sn(t,o)},m(i,r){O(i,t,r),t.innerHTML=n},p(i,r){r&1&&n!==(n=i[0].body+"")&&(t.innerHTML=n),sn(t,o=Yn(s,[r&1&&i[0].attributes]))},d(i){i&&C(t)}}}function Do(e){let t,n=e[0]&&_n(e);return{c(){n&&n.c(),t=Pe()},m(s,o){n&&n.m(s,o),O(s,t,o)},p(s,[o]){s[0]?n?n.p(s,o):(n=_n(s),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:F,o:F,d(s){s&&C(t),n&&n.d(s)}}}function Fo(e,t,n){const s={name:"",loading:null,destroyed:!1};let o=!1,i=0,r;const l=a=>{typeof t.onLoad=="function"&&t.onLoad(a),ge()("load",{icon:a})};function c(){n(3,i++,i)}return Lt(()=>{n(2,o=!0)}),Gn(()=>{n(1,s.destroyed=!0,s),s.loading&&(s.loading.abort(),n(1,s.loading=null,s))}),e.$$set=a=>{n(6,t=Fe(Fe({},t),en(a)))},e.$$.update=()=>{{const a=No(t.icon,s,o,c,l);n(0,r=a?qo(a.data,t):null),r&&a.classes&&n(0,r.attributes.class=(typeof t.class=="string"?t.class+" ":"")+a.classes.join(" "),r)}},t=en(t),[r,s,o,i]}class Ht extends de{constructor(t){super(),fe(this,t,Fo,Do,ie,{})}}function vn(e,t,n){const s=e.slice();return s[5]=t[n],s}function yn(e){let t,n=e[5].description+"",s;return{c(){t=y("small"),s=$(n),g(t,"class","svelte-1yaga58")},m(o,i){O(o,t,i),p(t,s)},p(o,i){i&1&&n!==(n=o[5].description+"")&&Z(s,n)},d(o){o&&C(t)}}}function wn(e){let t,n,s=e[5].title+"",o,i,r,l,c,a=e[5].description&&yn(e);function u(){return e[3](e[5])}return{c(){t=y("button"),n=y("span"),o=$(s),i=E(),a&&a.c(),r=E(),g(n,"class","title svelte-1yaga58"),g(t,"type","button"),g(t,"class","svelte-1yaga58"),pe(t,"selected",e[5].id===e[1])},m(d,h){O(d,t,h),p(t,n),p(n,o),p(t,i),a&&a.m(t,null),p(t,r),l||(c=V(t,"click",u),l=!0)},p(d,h){e=d,h&1&&s!==(s=e[5].title+"")&&Z(o,s),e[5].description?a?a.p(e,h):(a=yn(e),a.c(),a.m(t,r)):a&&(a.d(1),a=null),h&3&&pe(t,"selected",e[5].id===e[1])},d(d){d&&C(t),a&&a.d(),l=!1,c()}}}function Ho(e){let t,n=me(e[0]),s=[];for(let o=0;o<n.length;o+=1)s[o]=wn(vn(e,n,o));return{c(){t=y("div");for(let o=0;o<s.length;o+=1)s[o].c();g(t,"class","room-tabs svelte-1yaga58")},m(o,i){O(o,t,i);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(t,null)},p(o,[i]){if(i&7){n=me(o[0]);let r;for(r=0;r<n.length;r+=1){const l=vn(o,n,r);s[r]?s[r].p(l,i):(s[r]=wn(l),s[r].c(),s[r].m(t,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}},i:F,o:F,d(o){o&&C(t),At(s,o)}}}function Bo(e,t,n){let{rooms:s=[]}=t,{activeRoomId:o=null}=t;const i=ge();function r(c){i("select",c)}const l=c=>r(c.id);return e.$$set=c=>{"rooms"in c&&n(0,s=c.rooms),"activeRoomId"in c&&n(1,o=c.activeRoomId)},[s,o,r,l]}class zo extends de{constructor(t){super(),fe(this,t,Bo,Ho,ie,{rooms:0,activeRoomId:1})}}const{Boolean:Vo}=Jn;function kn(e,t,n){const s=e.slice();return s[15]=t[n],s}function Sn(e){let t,n=e[1].subtitle+"",s;return{c(){t=y("p"),s=$(n),g(t,"class","svelte-1tq3si5")},m(o,i){O(o,t,i),p(t,s)},p(o,i){i&2&&n!==(n=o[1].subtitle+"")&&Z(s,n)},d(o){o&&C(t)}}}function Zo(e){let t=(e[15].icon??e[15].title.slice(0,1))+"",n;return{c(){n=$(t)},m(s,o){O(s,n,o)},p(s,o){o&1&&t!==(t=(s[15].icon??s[15].title.slice(0,1))+"")&&Z(n,t)},i:F,o:F,d(s){s&&C(n)}}}function Qo(e){let t,n;return t=new Ht({props:{icon:e[15].icon,inline:!0}}),{c(){ne(t.$$.fragment)},m(s,o){x(t,s,o),n=!0},p(s,o){const i={};o&1&&(i.icon=s[15].icon),t.$set(i)},i(s){n||(A(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){ee(t,s)}}}function In(e){let t,n,s,o,i,r,l,c=e[15].title+"",a,u,d,h,b;const v=[Qo,Zo],m=[];function w(f,I){return I&1&&(s=null),s==null&&(s=!!f[7](f[15].icon)),s?0:1}o=w(e,-1),i=m[o]=v[o](e);function _(){return e[11](e[15])}return{c(){t=y("button"),n=y("span"),i.c(),r=E(),l=y("span"),a=$(c),u=E(),g(n,"class","icon svelte-1tq3si5"),g(l,"class","label"),g(t,"type","button"),g(t,"class","svelte-1tq3si5"),pe(t,"selected",e[15].id===e[2])},m(f,I){O(f,t,I),p(t,n),m[o].m(n,null),p(t,r),p(t,l),p(l,a),p(t,u),d=!0,h||(b=V(t,"click",_),h=!0)},p(f,I){e=f;let q=o;o=w(e,I),o===q?m[o].p(e,I):(ae(),N(m[q],1,1,()=>{m[q]=null}),ue(),i=m[o],i?i.p(e,I):(i=m[o]=v[o](e),i.c()),A(i,1),i.m(n,null)),(!d||I&1)&&c!==(c=e[15].title+"")&&Z(a,c),(!d||I&5)&&pe(t,"selected",e[15].id===e[2])},i(f){d||(A(i),d=!0)},o(f){N(i),d=!1},d(f){f&&C(t),m[o].d(),h=!1,b()}}}function En(e){let t,n,s,o,i,r,l=e[5]&&jn(e);return{c(){t=y("div"),n=y("strong"),n.textContent="Status:",s=E(),o=y("span"),i=$(e[4]),r=E(),l&&l.c(),g(o,"class","state svelte-1tq3si5"),g(t,"class","connection-banner svelte-1tq3si5")},m(c,a){O(c,t,a),p(t,n),p(t,s),p(t,o),p(o,i),p(t,r),l&&l.m(t,null)},p(c,a){a&16&&Z(i,c[4]),c[5]?l?l.p(c,a):(l=jn(c),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},d(c){c&&C(t),l&&l.d()}}}function jn(e){let t,n;return{c(){t=y("span"),n=$(e[5]),g(t,"class","message svelte-1tq3si5")},m(s,o){O(s,t,o),p(t,n)},p(s,o){o&32&&Z(n,s[5])},d(s){s&&C(t)}}}function Jo(e){let t,n,s,o,i=(e[1].logo??"Z")+"",r,l,c,a,u=e[1].title+"",d,h,b,v,m,w,_,f,I,q,M,S=e[3]?"Done editing":"Edit dashboard",k,L,R,P,T,Y,H,re,Le,B=e[1].subtitle&&Sn(e),te=me(e[0]),U=[];for(let j=0;j<te.length;j+=1)U[j]=In(kn(e,te,j));const le=j=>N(U[j],1,1,()=>{U[j]=null});f=new zo({props:{rooms:e[0],activeRoomId:e[2]}}),f.$on("select",e[12]);let Q=e[4]!=="connected"&&En(e);const ke=e[10].default,G=We(ke,e,e[9],null);return{c(){t=y("div"),n=y("aside"),s=y("div"),o=y("div"),r=$(i),l=E(),c=y("div"),a=y("h1"),d=$(u),h=E(),B&&B.c(),b=E(),v=y("nav");for(let j=0;j<U.length;j+=1)U[j].c();m=E(),w=y("section"),_=y("header"),ne(f.$$.fragment),I=E(),q=y("div"),M=y("button"),k=$(S),L=E(),R=y("button"),R.textContent="+ Add object",P=E(),Q&&Q.c(),T=E(),Y=y("div"),G&&G.c(),g(o,"class","logo svelte-1tq3si5"),g(a,"class","svelte-1tq3si5"),g(s,"class","brand svelte-1tq3si5"),g(v,"class","svelte-1tq3si5"),g(n,"class","sidebar svelte-1tq3si5"),g(M,"type","button"),g(M,"class","svelte-1tq3si5"),pe(M,"active",e[3]),g(R,"type","button"),g(R,"class","primary svelte-1tq3si5"),g(q,"class","actions svelte-1tq3si5"),g(_,"class","main-header svelte-1tq3si5"),g(Y,"class","content svelte-1tq3si5"),g(w,"class","main svelte-1tq3si5"),g(t,"class","shell svelte-1tq3si5")},m(j,D){O(j,t,D),p(t,n),p(n,s),p(s,o),p(o,r),p(s,l),p(s,c),p(c,a),p(a,d),p(c,h),B&&B.m(c,null),p(n,b),p(n,v);for(let K=0;K<U.length;K+=1)U[K]&&U[K].m(v,null);p(t,m),p(t,w),p(w,_),x(f,_,null),p(_,I),p(_,q),p(q,M),p(M,k),p(q,L),p(q,R),p(w,P),Q&&Q.m(w,null),p(w,T),p(w,Y),G&&G.m(Y,null),H=!0,re||(Le=[V(M,"click",e[13]),V(R,"click",e[14])],re=!0)},p(j,[D]){if((!H||D&2)&&i!==(i=(j[1].logo??"Z")+"")&&Z(r,i),(!H||D&2)&&u!==(u=j[1].title+"")&&Z(d,u),j[1].subtitle?B?B.p(j,D):(B=Sn(j),B.c(),B.m(c,null)):B&&(B.d(1),B=null),D&389){te=me(j[0]);let z;for(z=0;z<te.length;z+=1){const Ne=kn(j,te,z);U[z]?(U[z].p(Ne,D),A(U[z],1)):(U[z]=In(Ne),U[z].c(),A(U[z],1),U[z].m(v,null))}for(ae(),z=te.length;z<U.length;z+=1)le(z);ue()}const K={};D&1&&(K.rooms=j[0]),D&4&&(K.activeRoomId=j[2]),f.$set(K),(!H||D&8)&&S!==(S=j[3]?"Done editing":"Edit dashboard")&&Z(k,S),(!H||D&8)&&pe(M,"active",j[3]),j[4]!=="connected"?Q?Q.p(j,D):(Q=En(j),Q.c(),Q.m(w,T)):Q&&(Q.d(1),Q=null),G&&G.p&&(!H||D&512)&&xe(G,ke,j,j[9],H?Xe(ke,j[9],D,null):et(j[9]),null)},i(j){if(!H){for(let D=0;D<te.length;D+=1)A(U[D]);A(f.$$.fragment,j),A(G,j),H=!0}},o(j){U=U.filter(Vo);for(let D=0;D<U.length;D+=1)N(U[D]);N(f.$$.fragment,j),N(G,j),H=!1},d(j){j&&C(t),B&&B.d(),At(U,j),ee(f),Q&&Q.d(),G&&G.d(j),re=!1,se(Le)}}}function Go(e,t,n){let{$$slots:s={},$$scope:o}=t,{rooms:i=[]}=t,{sidebar:r={title:"Zashboard"}}=t,{activeRoomId:l=null}=t,{editMode:c=!1}=t,{connectionState:a="idle"}=t,{connectionMessage:u=""}=t;const d=ge(),h=f=>!!(f&&f.includes(":"));function b(f){d("selectRoom",f)}const v=f=>b(f.id),m=f=>b(f.detail),w=()=>d("toggleEdit"),_=()=>d("addObject");return e.$$set=f=>{"rooms"in f&&n(0,i=f.rooms),"sidebar"in f&&n(1,r=f.sidebar),"activeRoomId"in f&&n(2,l=f.activeRoomId),"editMode"in f&&n(3,c=f.editMode),"connectionState"in f&&n(4,a=f.connectionState),"connectionMessage"in f&&n(5,u=f.connectionMessage),"$$scope"in f&&n(9,o=f.$$scope)},[i,r,l,c,a,u,d,h,b,o,s,v,m,w,_]}class Ko extends de{constructor(t){super(),fe(this,t,Go,Jo,ie,{rooms:0,sidebar:1,activeRoomId:2,editMode:3,connectionState:4,connectionMessage:5})}}const Te=[];function Yo(e,t){return{subscribe:he(e,t).subscribe}}function he(e,t=F){let n;const s=new Set;function o(l){if(ie(e,l)&&(e=l,n)){const c=!Te.length;for(const a of s)a[1](),Te.push(a,e);if(c){for(let a=0;a<Te.length;a+=2)Te[a][0](Te[a+1]);Te.length=0}}}function i(l){o(l(e))}function r(l,c=F){const a=[l,c];return s.add(a),s.size===1&&(n=t(o,i)||F),l(e),()=>{s.delete(a),s.size===0&&n&&(n(),n=null)}}return{set:o,update:i,subscribe:r}}function Bt(e,t,n){const s=!Array.isArray(e),o=s?[e]:e;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=t.length<2;return Yo(n,(r,l)=>{let c=!1;const a=[];let u=0,d=F;const h=()=>{if(u)return;d();const v=t(s?a[0]:a,r,l);i?r(v):d=Ot(v)?v:F},b=o.map((v,m)=>Tt(v,w=>{a[m]=w,u&=~(1<<m),c&&h()},()=>{u|=1<<m}));return c=!0,h(),function(){se(b),d(),c=!1}})}const Wo="api";async function ds(e,t={}){const n=await fetch(`${Wo}${e}`,t);if(!n.ok){let s=`HTTP ${n.status}`;try{const o=await n.json();o&&typeof o=="object"&&"error"in o&&o.error&&(s=String(o.error))}catch{}throw new Error(s)}return n}async function Xo(){return(await ds("/dashboard")).json()}async function xo(e){return(await ds("/dashboard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()}const nt=()=>({sidebar:{title:"Zashboard",subtitle:"Fusion-inspired Home Assistant UI",logo:"Z"},rooms:[{id:"living-room",title:"Living room",icon:"mdi:sofa",description:"Favorite controls for the main living space",objects:[]},{id:"bedroom",title:"Bedroom",icon:"mdi:bed-queen",description:"Lights, blinds, and scenes",objects:[]}]}),ye=he(nt()),zt=he(!1),Ve=he(null),we=he(null),ei=Bt(ye,e=>e.sidebar),hs=Bt(ye,e=>e.rooms),ti=Bt([hs,Ve],([e,t])=>e.find(n=>n.id===t)??null);let mt=null;function Vt(e){return`${e}-${Math.random().toString(36).slice(2,9)}`}function ni(e){var n,s,o;if(!e||typeof e!="object")return nt();const t=Array.isArray(e.rooms)?e.rooms.map((i,r)=>si(i,r)):nt().rooms;return{sidebar:{title:((n=e.sidebar)==null?void 0:n.title)||"Zashboard",subtitle:((s=e.sidebar)==null?void 0:s.subtitle)||"Fusion-inspired Home Assistant UI",logo:((o=e.sidebar)==null?void 0:o.logo)||"Z"},rooms:t}}function si(e,t){const n=Array.isArray(e.objects)?e.objects.map(s=>oi(s)).filter(s=>!!s):[];return{id:e.id||`room-${t+1}`,title:e.title||`Room ${t+1}`,icon:e.icon,description:e.description,objects:n}}function oi(e){return!e||typeof e!="object"?null:e.type==="button"?{id:e.id||Vt("button"),type:"button",entity:e.entity||"",name:e.name||"Button",state:e.state,icon:e.icon,color:e.color||"#ffde16",service:e.service||"",showInfo:e.showInfo??!0,x:e.x??40,y:e.y??40,width:e.width??180,height:e.height??120}:null}function ii(){mt&&clearTimeout(mt),mt=setTimeout(async()=>{const e=Rt(ye);try{await xo(e)}catch(t){console.error("[Zashboard] Failed to save dashboard",t)}},300)}async function ri(){var e;try{const t=await Xo(),n=ni(t);ye.set(n);const s=n.rooms[0];Ve.set(s?s.id:null)}catch(t){console.error("[Zashboard] Failed to load dashboard config",t);const n=nt();ye.set(n),Ve.set(((e=n.rooms[0])==null?void 0:e.id)??null)}}function Zt(e){ye.update(t=>{const n=e(t.rooms);return{...t,rooms:n}}),ii()}function li(){zt.update(e=>!e)}function Cn(e){Ve.set(e)}function Qt(e,t){return e.findIndex(n=>n.id===t)}function ci(e,t,n,s){Zt(o=>{const i=o.map(a=>({...a,objects:[...a.objects]})),r=Qt(i,e);if(r===-1)return o;const l=i[r],c=l.objects.findIndex(a=>a.id===t);return c===-1?o:(l.objects[c]={...l.objects[c],x:n,y:s},i[r]=l,i)})}function ai(e){if(e==="button")return{id:Vt("button"),type:"button",entity:"",name:"New button",icon:"mdi:gesture-tap-button",color:"#ffde16",service:"",showInfo:!0,x:40,y:40,width:180,height:120};throw new Error(`Unsupported object type: ${e}`)}function ui(e,t){const n=ai(t);we.set({roomId:e,object:n,isNew:!0})}function fi(e,t){const s=Rt(ye).rooms.find(i=>i.id===e);if(!s)return;const o=s.objects.find(i=>i.id===t);o&&we.set({roomId:e,object:{...o},isNew:!1})}function di(){we.set(null)}function hi(e){Zt(t=>{const n=t.map(r=>({...r,objects:[...r.objects]})),s=Qt(n,e.roomId);if(s===-1)return t;const o=n[s],i={...e.object,id:e.object.id||Vt("object")};return e.isNew?o.objects=[...o.objects,i]:o.objects=o.objects.map(r=>r.id===i.id?i:r),n[s]=o,n}),we.set(null)}function pi(e,t){Zt(s=>{const o=s.map(l=>({...l,objects:[...l.objects]})),i=Qt(o,e);if(i===-1)return s;const r=o[i];return r.objects=r.objects.filter(l=>l.id!==t),o[i]=r,o});const n=Rt(we);n&&n.object.id===t&&n.roomId===e&&we.set(null)}const mi=e=>({}),Mn=e=>({});function On(e){let t;return{c(){t=y("span"),t.textContent="Drag",g(t,"class","handle-hint svelte-1ag6237")},m(n,s){O(n,t,s)},d(n){n&&C(t)}}}function gi(e){let t,n,s,o,i,r,l,c,a;const u=e[8].header,d=We(u,e,e[7],Mn);let h=e[4]&&On();const b=e[8].default,v=We(b,e,e[7],null);return{c(){t=y("div"),n=y("div"),d&&d.c(),s=E(),h&&h.c(),o=E(),i=y("div"),v&&v.c(),g(n,"class","card-handle svelte-1ag6237"),g(i,"class","card-content svelte-1ag6237"),g(t,"class","card-wrapper svelte-1ag6237"),g(t,"style",r=`left:${e[0]}px; top:${e[1]}px; width:${e[2]}px; height:${e[3]}px;`)},m(m,w){O(m,t,w),p(t,n),d&&d.m(n,null),p(n,s),h&&h.m(n,null),p(t,o),p(t,i),v&&v.m(i,null),l=!0,c||(a=V(n,"pointerdown",ks(e[5])),c=!0)},p(m,[w]){d&&d.p&&(!l||w&128)&&xe(d,u,m,m[7],l?Xe(u,m[7],w,mi):et(m[7]),Mn),m[4]?h||(h=On(),h.c(),h.m(n,null)):h&&(h.d(1),h=null),v&&v.p&&(!l||w&128)&&xe(v,b,m,m[7],l?Xe(b,m[7],w,null):et(m[7]),null),(!l||w&15&&r!==(r=`left:${m[0]}px; top:${m[1]}px; width:${m[2]}px; height:${m[3]}px;`))&&g(t,"style",r)},i(m){l||(A(d,m),A(v,m),l=!0)},o(m){N(d,m),N(v,m),l=!1},d(m){m&&C(t),d&&d.d(m),h&&h.d(),v&&v.d(m),c=!1,a()}}}function bi(e,t,n){let s;oe(e,zt,f=>n(4,s=f));let{$$slots:o={},$$scope:i}=t,{id:r}=t,{x:l=50}=t,{y:c=50}=t,{width:a=220}=t,{height:u=120}=t;const d=ge();let h=!1,b=0,v=0;function m(f){if(!s)return;h=!0;const I=f.currentTarget.getBoundingClientRect();b=f.clientX-I.left,v=f.clientY-I.top,window.addEventListener("pointermove",w),window.addEventListener("pointerup",_)}function w(f){if(!h)return;const I=f.clientX-b,q=f.clientY-v;d("move",{id:r,x:I,y:q})}function _(){h&&(h=!1,window.removeEventListener("pointermove",w),window.removeEventListener("pointerup",_))}return Gn(()=>{window.removeEventListener("pointermove",w),window.removeEventListener("pointerup",_)}),e.$$set=f=>{"id"in f&&n(6,r=f.id),"x"in f&&n(0,l=f.x),"y"in f&&n(1,c=f.y),"width"in f&&n(2,a=f.width),"height"in f&&n(3,u=f.height),"$$scope"in f&&n(7,i=f.$$scope)},[l,c,a,u,s,m,r,i,o]}class _i extends de{constructor(t){super(),fe(this,t,bi,gi,ie,{id:6,x:0,y:1,width:2,height:3})}}const vi=1,st=2,gt=3,Jt=4,yi=5,wi=6;function ki(e){return{type:"auth",access_token:e}}function Si(){return{type:"supported_features",id:1,features:{coalesce_messages:1}}}function Ii(){return{type:"get_states"}}function Ei(e,t,n,s,o){const i={type:"call_service",domain:e,service:t,target:s,return_response:o};return n&&(i.service_data=n),i}function ji(e){const t={type:"subscribe_events"};return e&&(t.event_type=e),t}function Tn(e){return{type:"unsubscribe_events",subscription:e}}function Ci(){return{type:"ping"}}function Mi(e,t){return{type:"result",success:!1,error:{code:e,message:t}}}function Oi(e){const t={},n=e.split("&");for(let s=0;s<n.length;s++){const o=n[s].split("="),i=decodeURIComponent(o[0]),r=o.length>1?decodeURIComponent(o[1]):void 0;t[i]=r}return t}const ps=(e,t,n,s)=>{const[o,i,r]=e.split(".",3);return Number(o)>t||Number(o)===t&&(s===void 0?Number(i)>=n:Number(i)>n)||s!==void 0&&Number(o)===t&&Number(i)===n&&Number(r)>=s},Ti="auth_invalid",Ri="auth_ok";function Ai(e){if(!e.auth)throw Jt;const t=e.auth;let n=t.expired?t.refreshAccessToken().then(()=>{n=void 0},()=>{n=void 0}):void 0;const s=t.wsUrl;function o(i,r,l){const c=new WebSocket(s);let a=!1;const u=()=>{if(c.removeEventListener("close",u),a){l(st);return}if(i===0){l(vi);return}const b=i===-1?-1:i-1;setTimeout(()=>o(b,r,l),1e3)},d=async b=>{try{t.expired&&await(n||t.refreshAccessToken()),c.send(JSON.stringify(ki(t.accessToken)))}catch(v){a=v===st,c.close()}},h=async b=>{const v=JSON.parse(b.data);switch(v.type){case Ti:a=!0,c.close();break;case Ri:c.removeEventListener("open",d),c.removeEventListener("message",h),c.removeEventListener("close",u),c.removeEventListener("error",u),c.haVersion=v.ha_version,ps(c.haVersion,2022,9)&&c.send(JSON.stringify(Si())),r(c);break}};c.addEventListener("open",d),c.addEventListener("message",h),c.addEventListener("close",u),c.addEventListener("error",u)}return new Promise((i,r)=>o(e.setupRetry,i,r))}class Pi{constructor(t,n){this._handleMessage=s=>{let o=JSON.parse(s.data);Array.isArray(o)||(o=[o]),o.forEach(i=>{const r=this.commands.get(i.id);switch(i.type){case"event":r?r.callback(i.event):(console.warn(`Received event for unknown subscription ${i.id}. Unsubscribing.`),this.sendMessagePromise(Tn(i.id)).catch(l=>{}));break;case"result":r&&(i.success?(r.resolve(i.result),"subscribe"in r||this.commands.delete(i.id)):(r.reject(i.error),this.commands.delete(i.id)));break;case"pong":r?(r.resolve(),this.commands.delete(i.id)):console.warn(`Received unknown pong response ${i.id}`);break}})},this._handleClose=async()=>{const s=this.commands;if(this.commandId=1,this.oldSubscriptions=this.commands,this.commands=new Map,this.socket=void 0,s.forEach(r=>{"subscribe"in r||r.reject(Mi(gt,"Connection lost"))}),this.closeRequested)return;this.fireEvent("disconnected");const o=Object.assign(Object.assign({},this.options),{setupRetry:0}),i=r=>{setTimeout(async()=>{if(!this.closeRequested)try{const l=await o.createSocket(o);this._setSocket(l)}catch(l){if(this._queuedMessages){const c=this._queuedMessages;this._queuedMessages=void 0;for(const a of c)a.reject&&a.reject(gt)}l===st?this.fireEvent("reconnect-error",l):i(r+1)}},Math.min(r,5)*1e3)};this.suspendReconnectPromise&&(await this.suspendReconnectPromise,this.suspendReconnectPromise=void 0,this._queuedMessages=[]),i(0)},this.options=n,this.commandId=2,this.commands=new Map,this.eventListeners=new Map,this.closeRequested=!1,this._setSocket(t)}get connected(){return this.socket!==void 0&&this.socket.readyState==this.socket.OPEN}_setSocket(t){this.socket=t,this.haVersion=t.haVersion,t.addEventListener("message",this._handleMessage),t.addEventListener("close",this._handleClose);const n=this.oldSubscriptions;n&&(this.oldSubscriptions=void 0,n.forEach(o=>{"subscribe"in o&&o.subscribe&&o.subscribe().then(i=>{o.unsubscribe=i,o.resolve()})}));const s=this._queuedMessages;if(s){this._queuedMessages=void 0;for(const o of s)o.resolve()}this.fireEvent("ready")}addEventListener(t,n){let s=this.eventListeners.get(t);s||(s=[],this.eventListeners.set(t,s)),s.push(n)}removeEventListener(t,n){const s=this.eventListeners.get(t);if(!s)return;const o=s.indexOf(n);o!==-1&&s.splice(o,1)}fireEvent(t,n){(this.eventListeners.get(t)||[]).forEach(s=>s(this,n))}suspendReconnectUntil(t){this.suspendReconnectPromise=t}suspend(){if(!this.suspendReconnectPromise)throw new Error("Suspend promise not set");this.socket&&this.socket.close()}reconnect(t=!1){if(this.socket){if(!t){this.socket.close();return}this.socket.removeEventListener("message",this._handleMessage),this.socket.removeEventListener("close",this._handleClose),this.socket.close(),this._handleClose()}}close(){this.closeRequested=!0,this.socket&&this.socket.close()}async subscribeEvents(t,n){return this.subscribeMessage(t,ji(n))}ping(){return this.sendMessagePromise(Ci())}sendMessage(t,n){if(!this.connected)throw gt;if(this._queuedMessages){if(n)throw new Error("Cannot queue with commandId");this._queuedMessages.push({resolve:()=>this.sendMessage(t)});return}n||(n=this._genCmdId()),t.id=n,this.socket.send(JSON.stringify(t))}sendMessagePromise(t){return new Promise((n,s)=>{if(this._queuedMessages){this._queuedMessages.push({reject:s,resolve:async()=>{try{n(await this.sendMessagePromise(t))}catch(i){s(i)}}});return}const o=this._genCmdId();this.commands.set(o,{resolve:n,reject:s}),this.sendMessage(t,o)})}async subscribeMessage(t,n,s){if(this._queuedMessages&&await new Promise((i,r)=>{this._queuedMessages.push({resolve:i,reject:r})}),s!=null&&s.preCheck&&!await s.preCheck())throw new Error("Pre-check failed");let o;return await new Promise((i,r)=>{const l=this._genCmdId();o={resolve:i,reject:r,callback:t,subscribe:(s==null?void 0:s.resubscribe)!==!1?()=>this.subscribeMessage(t,n,s):void 0,unsubscribe:async()=>{this.connected&&await this.sendMessagePromise(Tn(l)),this.commands.delete(l)}},this.commands.set(l,o);try{this.sendMessage(n,l)}catch{}}),()=>o.unsubscribe()}_genCmdId(){return++this.commandId}}const Li=()=>`${location.protocol}//${location.host}/`,Ni=e=>e*1e3+Date.now();function qi(){const{protocol:e,host:t,pathname:n,search:s}=location;return`${e}//${t}${n}${s}`}function $i(e,t,n,s){let o=`${e}/auth/authorize?response_type=code&redirect_uri=${encodeURIComponent(n)}`;return t!==null&&(o+=`&client_id=${encodeURIComponent(t)}`),s&&(o+=`&state=${encodeURIComponent(s)}`),o}function Ui(e,t,n,s){n+=(n.includes("?")?"&":"?")+"auth_callback=1",document.location.href=$i(e,t,n,s)}async function ms(e,t,n){const s=typeof location<"u"&&location;if(s&&s.protocol==="https:"){const l=document.createElement("a");if(l.href=e,l.protocol==="http:"&&l.hostname!=="localhost")throw yi}const o=new FormData;t!==null&&o.append("client_id",t),Object.keys(n).forEach(l=>{o.append(l,n[l])});const i=await fetch(`${e}/auth/token`,{method:"POST",credentials:"same-origin",body:o});if(!i.ok)throw i.status===400||i.status===403?st:new Error("Unable to fetch tokens");const r=await i.json();return r.hassUrl=e,r.clientId=t,r.expires=Ni(r.expires_in),r}function Rn(e,t,n){return ms(e,t,{code:n,grant_type:"authorization_code"})}function Di(e){return btoa(JSON.stringify(e))}function Fi(e){return JSON.parse(atob(e))}class Hi{constructor(t,n){this.data=t,this._saveTokens=n}get wsUrl(){return`ws${this.data.hassUrl.substr(4)}/api/websocket`}get accessToken(){return this.data.access_token}get expired(){return Date.now()>this.data.expires}async refreshAccessToken(){if(!this.data.refresh_token)throw new Error("No refresh_token");const t=await ms(this.data.hassUrl,this.data.clientId,{grant_type:"refresh_token",refresh_token:this.data.refresh_token});t.refresh_token=this.data.refresh_token,this.data=t,this._saveTokens&&this._saveTokens(t)}async revoke(){if(!this.data.refresh_token)throw new Error("No refresh_token to revoke");const t=new FormData;t.append("token",this.data.refresh_token),await fetch(`${this.data.hassUrl}/auth/revoke`,{method:"POST",credentials:"same-origin",body:t}),this._saveTokens&&this._saveTokens(null)}}async function An(e={}){let t,n=e.hassUrl;n&&n[n.length-1]==="/"&&(n=n.substr(0,n.length-1));const s=e.clientId!==void 0?e.clientId:Li(),o=e.limitHassInstance===!0;if(e.authCode&&n&&(t=await Rn(n,s,e.authCode),e.saveTokens&&e.saveTokens(t)),!t){const i=Oi(location.search.substr(1));if("auth_callback"in i){const r=Fi(i.state);if(o&&(r.hassUrl!==n||r.clientId!==s))throw wi;t=await Rn(r.hassUrl,r.clientId,i.code),e.saveTokens&&e.saveTokens(t)}}if(!t&&e.loadTokens&&(t=await e.loadTokens()),t&&(n===void 0||t.hassUrl===n))return new Hi(t,e.saveTokens);if(n===void 0)throw Jt;return Ui(n,s,e.redirectUrl||qi(),Di({hassUrl:n,clientId:s})),new Promise(()=>{})}const Bi=e=>{let t=[];function n(o){let i=[];for(let r=0;r<t.length;r++)t[r]===o?o=null:i.push(t[r]);t=i}function s(o,i){e=i?o:Object.assign(Object.assign({},e),o);let r=t;for(let l=0;l<r.length;l++)r[l](e)}return{get state(){return e},action(o){function i(r){s(r,!1)}return function(){let r=[e];for(let c=0;c<arguments.length;c++)r.push(arguments[c]);let l=o.apply(this,r);if(l!=null)return l instanceof Promise?l.then(i):i(l)}},setState:s,clearState(){e=void 0},subscribe(o){return t.push(o),()=>{n(o)}}}},zi=5e3,Pn=(e,t,n,s,o={unsubGrace:!0})=>{if(e[t])return e[t];let i=0,r,l,c=Bi();const a=()=>{if(!n)throw new Error("Collection does not support refresh");return n(e).then(m=>c.setState(m,!0))},u=()=>a().catch(m=>{if(e.connected)throw m}),d=()=>{if(l!==void 0){clearTimeout(l),l=void 0;return}s&&(r=s(e,c)),n&&(e.addEventListener("ready",u),u()),e.addEventListener("disconnected",v)},h=()=>{l=void 0,r&&r.then(m=>{m()}),c.clearState(),e.removeEventListener("ready",a),e.removeEventListener("disconnected",v)},b=()=>{l=setTimeout(h,zi)},v=()=>{l&&(clearTimeout(l),h())};return e[t]={get state(){return c.state},refresh:a,subscribe(m){i++,i===1&&d();const w=c.subscribe(m);return c.state!==void 0&&setTimeout(()=>m(c.state),0),()=>{w(),i--,i||(o.unsubGrace?b():h())}}},e[t]},Vi=e=>e.sendMessagePromise(Ii()),Zi=(e,t,n,s,o,i)=>e.sendMessagePromise(Ei(t,n,s,o,i));function Qi(e,t){const n=Object.assign({},e.state);if(t.a)for(const s in t.a){const o=t.a[s];let i=new Date(o.lc*1e3).toISOString();n[s]={entity_id:s,state:o.s,attributes:o.a,context:typeof o.c=="string"?{id:o.c,parent_id:null,user_id:null}:o.c,last_changed:i,last_updated:o.lu?new Date(o.lu*1e3).toISOString():i}}if(t.r)for(const s of t.r)delete n[s];if(t.c)for(const s in t.c){let o=n[s];if(!o){console.warn("Received state update for unknown entity",s);continue}o=Object.assign({},o);const{"+":i,"-":r}=t.c[s],l=(i==null?void 0:i.a)||(r==null?void 0:r.a),c=l?Object.assign({},o.attributes):o.attributes;if(i&&(i.s!==void 0&&(o.state=i.s),i.c&&(typeof i.c=="string"?o.context=Object.assign(Object.assign({},o.context),{id:i.c}):o.context=Object.assign(Object.assign({},o.context),i.c)),i.lc?o.last_updated=o.last_changed=new Date(i.lc*1e3).toISOString():i.lu&&(o.last_updated=new Date(i.lu*1e3).toISOString()),i.a&&Object.assign(c,i.a)),r!=null&&r.a)for(const a of r.a)delete c[a];l&&(o.attributes=c),n[s]=o}e.setState(n,!0)}const Ji=(e,t)=>e.subscribeMessage(n=>Qi(t,n),{type:"subscribe_entities"});function Gi(e,t){const n=e.state;if(n===void 0)return;const{entity_id:s,new_state:o}=t.data;if(o)e.setState({[o.entity_id]:o});else{const i=Object.assign({},n);delete i[s],e.setState(i,!0)}}async function Ki(e){const t=await Vi(e),n={};for(let s=0;s<t.length;s++){const o=t[s];n[o.entity_id]=o}return n}const Yi=(e,t)=>e.subscribeEvents(n=>Gi(t,n),"state_changed"),Wi=e=>ps(e.haVersion,2022,4,0)?Pn(e,"_ent",void 0,Ji):Pn(e,"_ent",Ki,Yi),Ln=(e,t)=>Wi(e).subscribe(t);async function Xi(e){const t=Object.assign({setupRetry:0,createSocket:Ai},e),n=await t.createSocket(t);return new Pi(n,t)}const Ct=he(null),Mt=he({}),ce=he("idle"),$e=he(null);function xi(){try{return window.location.pathname.includes("/api/hassio_ingress")}catch{return!1}}function er(){try{return window.location.hostname.endsWith(".ui.nabu.casa")}catch{return!1}}function tr(){const e=new Set;let t=window;for(let n=0;n<10&&!(!t||e.has(t));n++){e.add(t);try{if(t.hassConnection)return console.log("[Zashboard] Found hassConnection on window level",n),t.hassConnection}catch(s){console.warn("[Zashboard] Error probing window level",n,s);break}if(!t.parent||t.parent===t)break;t=t.parent}return null}async function nr(){const e=tr();if(!e)return null;const t=await e;return t.conn??t}async function sr(){var n,s;if(typeof window>"u")return;ce.set("connecting"),$e.set(null);const e=xi(),t=er();try{if(e||t){console.log("[Zashboard] Running in ingress / remote UI mode");const r=await nr();if(!r){ce.set("error"),$e.set("Zashboard couldn't access the existing Home Assistant connection. Make sure you're opening Zashboard from inside the Home Assistant UI.");return}Ct.set(r),ce.set("connected"),Ln(r,l=>{Mt.set(l||{})}),(n=r.addEventListener)==null||n.call(r,"disconnected",()=>{ce.set("disconnected")});return}console.log("[Zashboard] Not in ingress/remote; using getAuth() dev flow");let o;try{o=await An()}catch(r){if(r===Jt){const l=new URL(window.location.href),c=`${l.protocol}//${l.host}`;o=await An({hassUrl:c})}else{console.error("[Zashboard] getAuth error",r),ce.set("error"),$e.set("Failed to get Home Assistant auth");return}}const i=await Xi({auth:o});Ct.set(i),ce.set("connected"),Ln(i,r=>{Mt.set(r||{})}),(s=i.addEventListener)==null||s.call(i,"disconnected",()=>{ce.set("disconnected")})}catch(o){console.error("[Zashboard] Failed to initialize HA websocket",o),ce.set("error"),$e.set("Failed to connect to Home Assistant websocket")}}async function or(e,t,n){let s=null;if(Ct.subscribe(i=>s=i)(),!s){console.warn("[Zashboard] No HA connection yet, cannot call service",e,t);return}return Zi(s,e,t,n)}function ir(e){let t=(e[0].icon??"BTN")+"",n;return{c(){n=$(t)},m(s,o){O(s,n,o)},p(s,o){o&1&&t!==(t=(s[0].icon??"BTN")+"")&&Z(n,t)},i:F,o:F,d(s){s&&C(n)}}}function rr(e){let t,n;return t=new Ht({props:{icon:e[0].icon,inline:!0}}),{c(){ne(t.$$.fragment)},m(s,o){x(t,s,o),n=!0},p(s,o){const i={};o&1&&(i.icon=s[0].icon),t.$set(i)},i(s){n||(A(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){ee(t,s)}}}function Nn(e){let t,n,s;function o(c,a){return c[2]?ar:c[0].state?cr:lr}let i=o(e),r=i(e),l=e[0].service&&qn(e);return{c(){t=y("div"),n=y("span"),r.c(),s=E(),l&&l.c(),g(n,"class","state"),g(t,"class","info svelte-1ssxdy0")},m(c,a){O(c,t,a),p(t,n),r.m(n,null),p(t,s),l&&l.m(t,null)},p(c,a){i===(i=o(c))&&r?r.p(c,a):(r.d(1),r=i(c),r&&(r.c(),r.m(n,null))),c[0].service?l?l.p(c,a):(l=qn(c),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},d(c){c&&C(t),r.d(),l&&l.d()}}}function lr(e){let t;return{c(){t=$("unavailable")},m(n,s){O(n,t,s)},p:F,d(n){n&&C(t)}}}function cr(e){let t=e[0].state+"",n;return{c(){n=$(t)},m(s,o){O(s,n,o)},p(s,o){o&1&&t!==(t=s[0].state+"")&&Z(n,t)},d(s){s&&C(n)}}}function ar(e){let t=e[2].state+"",n;return{c(){n=$(t)},m(s,o){O(s,n,o)},p(s,o){o&4&&t!==(t=s[2].state+"")&&Z(n,t)},d(s){s&&C(n)}}}function qn(e){let t,n=e[0].service+"",s;return{c(){t=y("small"),s=$(n),g(t,"class","svelte-1ssxdy0")},m(o,i){O(o,t,i),p(t,s)},p(o,i){i&1&&n!==(n=o[0].service+"")&&Z(s,n)},d(o){o&&C(t)}}}function ur(e){let t,n,s,o,i,r,l,c,a,u=e[0].name+"",d,h,b,v,m,w,_;const f=[rr,ir],I=[];function q(S,k){return k&1&&(i=null),i==null&&(i=!!S[4](S[0].icon)),i?0:1}r=q(e,-1),l=I[r]=f[r](e);let M=e[0].showInfo&&Nn(e);return{c(){t=y("div"),n=y("button"),s=y("div"),o=y("span"),l.c(),c=E(),a=y("span"),d=$(u),h=E(),M&&M.c(),g(o,"class","icon svelte-1ssxdy0"),g(a,"class","name svelte-1ssxdy0"),g(s,"class","top-row svelte-1ssxdy0"),g(n,"type","button"),g(n,"class","svelte-1ssxdy0"),g(t,"class",b=tn(`button-card ${e[3]?"active":""} ${e[1]?"editing":""}`)+" svelte-1ssxdy0"),g(t,"style",v=`--button-color: ${e[0].color||"#ffde16"}`)},m(S,k){O(S,t,k),p(t,n),p(n,s),p(s,o),I[r].m(o,null),p(s,c),p(s,a),p(a,d),p(n,h),M&&M.m(n,null),m=!0,w||(_=V(n,"click",e[5]),w=!0)},p(S,[k]){let L=r;r=q(S,k),r===L?I[r].p(S,k):(ae(),N(I[L],1,1,()=>{I[L]=null}),ue(),l=I[r],l?l.p(S,k):(l=I[r]=f[r](S),l.c()),A(l,1),l.m(o,null)),(!m||k&1)&&u!==(u=S[0].name+"")&&Z(d,u),S[0].showInfo?M?M.p(S,k):(M=Nn(S),M.c(),M.m(n,null)):M&&(M.d(1),M=null),(!m||k&10&&b!==(b=tn(`button-card ${S[3]?"active":""} ${S[1]?"editing":""}`)+" svelte-1ssxdy0"))&&g(t,"class",b),(!m||k&1&&v!==(v=`--button-color: ${S[0].color||"#ffde16"}`))&&g(t,"style",v)},i(S){m||(A(l),m=!0)},o(S){N(l),m=!1},d(S){S&&C(t),I[r].d(),M&&M.d(),w=!1,_()}}}function fr(e,t,n){let s,o,i;oe(e,Mt,d=>n(6,i=d));let{object:r}=t,{editMode:l=!1}=t;const c=ge(),a=d=>!!(d&&d.includes(":"));function u(){if(l){c("edit");return}if(!r.service)return;const[d,h]=r.service.split(".");!d||!h||or(d,h,{entity_id:r.entity})}return e.$$set=d=>{"object"in d&&n(0,r=d.object),"editMode"in d&&n(1,l=d.editMode)},e.$$.update=()=>{e.$$.dirty&65&&n(2,s=r.entity?i==null?void 0:i[r.entity]:null),e.$$.dirty&4&&n(3,o=(s==null?void 0:s.state)==="on")},[r,l,s,o,a,u,i]}class gs extends de{constructor(t){super(),fe(this,t,fr,ur,ie,{object:0,editMode:1})}}function dr(e){let t,n,s,o,i,r,l,c,a,u,d,h,b,v,m;const w=e[5].default,_=We(w,e,e[4],null);return{c(){t=y("div"),n=y("div"),s=y("header"),o=y("div"),i=y("small"),i.textContent="Dashboard popup",r=E(),l=y("h2"),c=$(e[0]),a=E(),u=y("button"),u.textContent="x",d=E(),h=y("div"),_&&_.c(),g(i,"class","svelte-5ct2vl"),g(l,"class","svelte-5ct2vl"),g(o,"class","title-block svelte-5ct2vl"),g(u,"type","button"),g(u,"class","close svelte-5ct2vl"),g(u,"title","Close popup"),g(s,"class","modal-header svelte-5ct2vl"),g(h,"class","modal-body svelte-5ct2vl"),g(n,"class","modal svelte-5ct2vl"),g(n,"role","dialog"),g(n,"aria-modal","true"),g(n,"aria-label",e[0]),g(t,"class","overlay svelte-5ct2vl"),g(t,"role","presentation")},m(f,I){O(f,t,I),p(t,n),p(n,s),p(s,o),p(o,i),p(o,r),p(o,l),p(l,c),p(s,a),p(s,u),p(n,d),p(n,h),_&&_.m(h,null),e[6](n),b=!0,v||(m=[V(u,"click",e[2]),V(t,"pointerdown",e[3])],v=!0)},p(f,[I]){(!b||I&1)&&Z(c,f[0]),_&&_.p&&(!b||I&16)&&xe(_,w,f,f[4],b?Xe(w,f[4],I,null):et(f[4]),null),(!b||I&1)&&g(n,"aria-label",f[0])},i(f){b||(A(_,f),b=!0)},o(f){N(_,f),b=!1},d(f){f&&C(t),_&&_.d(f),e[6](null),v=!1,se(m)}}}function hr(e,t,n){let{$$slots:s={},$$scope:o}=t,{title:i=""}=t;const r=ge();let l=null;function c(){r("close")}function a(h){h.target===h.currentTarget&&c()}function u(h){h.key==="Escape"&&c()}Lt(()=>{const h=document.body.style.overflow;return document.body.style.overflow="hidden",window.addEventListener("keydown",u),()=>{document.body.style.overflow=h,window.removeEventListener("keydown",u)}});function d(h){bt[h?"unshift":"push"](()=>{l=h,n(1,l)})}return e.$$set=h=>{"title"in h&&n(0,i=h.title),"$$scope"in h&&n(4,o=h.$$scope)},[i,l,c,a,o,s,d]}class pr extends de{constructor(t){super(),fe(this,t,hr,dr,ie,{title:0})}}function $n(e){let t,n;return t=new pr({props:{title:"Object settings",$$slots:{default:[mr]},$$scope:{ctx:e}}}),t.$on("close",e[14]),{c(){ne(t.$$.fragment)},m(s,o){x(t,s,o),n=!0},p(s,o){const i={};o&32771&&(i.$$scope={dirty:o,ctx:s}),t.$set(i)},i(s){n||(A(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){ee(t,s)}}}function mr(e){let t,n,s,o,i,r,l,c,a,u,d,h,b,v,m,w,_,f,I,q,M,S,k,L,R,P,T,Y,H,re,Le,B,te,U,le,Q,ke,G,j,D,K,z,Ne,Se,Ie,Ze,Gt,lt,ct,be,Ee,Kt,je,Ce,Yt,Me,Qe=e[0].isNew?"Add object":"Save changes",at,X,ut,Wt;return i=new gs({props:{object:e[1],editMode:!0}}),{c(){t=y("div"),n=y("section"),s=y("h3"),s.textContent="Preview",o=E(),ne(i.$$.fragment),r=E(),l=y("section"),c=y("label"),a=y("span"),a.textContent="Entity",u=E(),d=y("input"),b=E(),v=y("label"),m=y("span"),m.textContent="Name",w=E(),_=y("input"),I=E(),q=y("label"),M=y("span"),M.textContent="State (optional override)",S=E(),k=y("input"),R=E(),P=y("label"),T=y("span"),T.textContent="Icon",Y=E(),H=y("input"),Le=E(),B=y("label"),te=y("span"),te.textContent="Accent color",U=E(),le=y("input"),ke=E(),G=y("label"),j=y("span"),j.textContent="Service (domain.service)",D=E(),K=y("input"),Ne=E(),Se=y("label"),Ie=y("input"),Gt=E(),lt=y("span"),lt.textContent="Show more information on the button",ct=E(),be=y("footer"),Ee=y("button"),Ee.textContent="Remove object",Kt=E(),je=y("div"),Ce=y("button"),Ce.textContent="Cancel",Yt=E(),Me=y("button"),at=$(Qe),g(s,"class","svelte-1m373v9"),g(n,"class","preview svelte-1m373v9"),g(d,"type","text"),d.value=h=e[1].entity,g(d,"class","svelte-1m373v9"),g(c,"class","svelte-1m373v9"),g(_,"type","text"),_.value=f=e[1].name,g(_,"class","svelte-1m373v9"),g(v,"class","svelte-1m373v9"),g(k,"type","text"),k.value=L=e[1].state??"",g(k,"class","svelte-1m373v9"),g(q,"class","svelte-1m373v9"),g(H,"type","text"),H.value=re=e[1].icon??"",g(H,"class","svelte-1m373v9"),g(P,"class","svelte-1m373v9"),g(le,"type","color"),le.value=Q=e[1].color,g(le,"class","svelte-1m373v9"),g(B,"class","svelte-1m373v9"),g(K,"type","text"),K.value=z=e[1].service??"",g(K,"class","svelte-1m373v9"),g(G,"class","svelte-1m373v9"),g(Ie,"type","checkbox"),Ie.checked=Ze=e[1].showInfo,g(Se,"class","toggle svelte-1m373v9"),g(l,"class","form svelte-1m373v9"),g(t,"class","editor svelte-1m373v9"),g(Ee,"type","button"),g(Ee,"class","danger svelte-1m373v9"),g(Ce,"type","button"),g(Ce,"class","svelte-1m373v9"),g(Me,"type","button"),g(Me,"class","primary svelte-1m373v9"),g(je,"class","right svelte-1m373v9"),g(be,"class","modal-actions svelte-1m373v9")},m(J,W){O(J,t,W),p(t,n),p(n,s),p(n,o),x(i,n,null),p(t,r),p(t,l),p(l,c),p(c,a),p(c,u),p(c,d),p(l,b),p(l,v),p(v,m),p(v,w),p(v,_),p(l,I),p(l,q),p(q,M),p(q,S),p(q,k),p(l,R),p(l,P),p(P,T),p(P,Y),p(P,H),p(l,Le),p(l,B),p(B,te),p(B,U),p(B,le),p(l,ke),p(l,G),p(G,j),p(G,D),p(G,K),p(l,Ne),p(l,Se),p(Se,Ie),p(Se,Gt),p(Se,lt),O(J,ct,W),O(J,be,W),p(be,Ee),p(be,Kt),p(be,je),p(je,Ce),p(je,Yt),p(je,Me),p(Me,at),X=!0,ut||(Wt=[V(d,"input",e[6]),V(_,"input",e[7]),V(k,"input",e[8]),V(H,"input",e[9]),V(le,"input",e[10]),V(K,"input",e[11]),V(Ie,"change",e[12]),V(Ee,"click",e[5]),V(Ce,"click",e[13]),V(Me,"click",e[4])],ut=!0)},p(J,W){const Xt={};W&2&&(Xt.object=J[1]),i.$set(Xt),(!X||W&2&&h!==(h=J[1].entity)&&d.value!==h)&&(d.value=h),(!X||W&2&&f!==(f=J[1].name)&&_.value!==f)&&(_.value=f),(!X||W&2&&L!==(L=J[1].state??"")&&k.value!==L)&&(k.value=L),(!X||W&2&&re!==(re=J[1].icon??"")&&H.value!==re)&&(H.value=re),(!X||W&2&&Q!==(Q=J[1].color))&&(le.value=Q),(!X||W&2&&z!==(z=J[1].service??"")&&K.value!==z)&&(K.value=z),(!X||W&2&&Ze!==(Ze=J[1].showInfo))&&(Ie.checked=Ze),(!X||W&1)&&Qe!==(Qe=J[0].isNew?"Add object":"Save changes")&&Z(at,Qe)},i(J){X||(A(i.$$.fragment,J),X=!0)},o(J){N(i.$$.fragment,J),X=!1},d(J){J&&(C(t),C(ct),C(be)),ee(i),ut=!1,se(Wt)}}}function gr(e){let t,n,s=e[0]&&e[1]&&$n(e);return{c(){s&&s.c(),t=Pe()},m(o,i){s&&s.m(o,i),O(o,t,i),n=!0},p(o,[i]){o[0]&&o[1]?s?(s.p(o,i),i&3&&A(s,1)):(s=$n(o),s.c(),A(s,1),s.m(t.parentNode,t)):s&&(ae(),N(s,1,1,()=>{s=null}),ue())},i(o){n||(A(s),n=!0)},o(o){N(s),n=!1},d(o){o&&C(t),s&&s.d(o)}}}function br(e,t,n){let{editing:s=null}=t;const o=ge();let i=null;function r(f,I){i&&n(1,i={...i,[f]:I})}function l(){i&&o("save",i)}function c(){o("remove")}const a=f=>r("entity",f.currentTarget.value),u=f=>r("name",f.currentTarget.value),d=f=>r("state",f.currentTarget.value),h=f=>r("icon",f.currentTarget.value),b=f=>r("color",f.currentTarget.value),v=f=>r("service",f.currentTarget.value),m=f=>r("showInfo",f.currentTarget.checked),w=()=>o("close"),_=()=>o("close");return e.$$set=f=>{"editing"in f&&n(0,s=f.editing)},e.$$.update=()=>{e.$$.dirty&1&&s&&n(1,i={...s.object})},[s,i,o,r,l,c,a,u,d,h,b,v,m,w,_]}class _r extends de{constructor(t){super(),fe(this,t,br,gr,ie,{editing:0})}}const{Boolean:vr}=Jn;function Un(e,t,n){const s=e.slice();return s[9]=t[n],s}function Dn(e){let t,n,s,o,i,r,l,c,a,u,d,h=me(e[1]),b=[];for(let m=0;m<h.length;m+=1)b[m]=Hn(Un(e,h,m));const v=m=>N(b[m],1,1,()=>{b[m]=null});return{c(){t=y("div"),n=y("div"),s=y("header"),o=y("div"),o.innerHTML='<h2 class="svelte-1rikuya">Add an object</h2> <p class="svelte-1rikuya">Select the room where this object should appear.</p>',i=E(),r=y("button"),r.textContent="x",l=E(),c=y("div");for(let m=0;m<b.length;m+=1)b[m].c();g(r,"type","button"),g(r,"class","svelte-1rikuya"),g(s,"class","svelte-1rikuya"),g(c,"class","room-list svelte-1rikuya"),g(n,"class","panel svelte-1rikuya"),g(t,"class","add-overlay svelte-1rikuya"),g(t,"role","presentation")},m(m,w){O(m,t,w),p(t,n),p(n,s),p(s,o),p(s,i),p(s,r),p(n,l),p(n,c);for(let _=0;_<b.length;_+=1)b[_]&&b[_].m(c,null);a=!0,u||(d=[V(r,"click",e[3]),V(t,"pointerdown",e[4])],u=!0)},p(m,w){if(w&102){h=me(m[1]);let _;for(_=0;_<h.length;_+=1){const f=Un(m,h,_);b[_]?(b[_].p(f,w),A(b[_],1)):(b[_]=Hn(f),b[_].c(),A(b[_],1),b[_].m(c,null))}for(ae(),_=h.length;_<b.length;_+=1)v(_);ue()}},i(m){if(!a){for(let w=0;w<h.length;w+=1)A(b[w]);a=!0}},o(m){b=b.filter(vr);for(let w=0;w<b.length;w+=1)N(b[w]);a=!1},d(m){m&&C(t),At(b,m),u=!1,se(d)}}}function yr(e){let t=(e[9].icon??e[9].title.slice(0,1))+"",n;return{c(){n=$(t)},m(s,o){O(s,n,o)},p(s,o){o&2&&t!==(t=(s[9].icon??s[9].title.slice(0,1))+"")&&Z(n,t)},i:F,o:F,d(s){s&&C(n)}}}function wr(e){let t,n;return t=new Ht({props:{icon:e[9].icon,inline:!0}}),{c(){ne(t.$$.fragment)},m(s,o){x(t,s,o),n=!0},p(s,o){const i={};o&2&&(i.icon=s[9].icon),t.$set(i)},i(s){n||(A(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){ee(t,s)}}}function Fn(e){let t,n=e[9].description+"",s;return{c(){t=y("small"),s=$(n),g(t,"class","svelte-1rikuya")},m(o,i){O(o,t,i),p(t,s)},p(o,i){i&2&&n!==(n=o[9].description+"")&&Z(s,n)},d(o){o&&C(t)}}}function Hn(e){let t,n,s,o,i,r,l,c,a,u=e[9].title+"",d,h,b,v,m,w,_,f,I;const q=[wr,yr],M=[];function S(R,P){return P&2&&(o=null),o==null&&(o=!!R[6](R[9].icon)),o?0:1}i=S(e,-1),r=M[i]=q[i](e);let k=e[9].description&&Fn(e);function L(){return e[7](e[9])}return{c(){t=y("article"),n=y("div"),s=y("span"),r.c(),l=E(),c=y("div"),a=y("h3"),d=$(u),h=E(),k&&k.c(),b=E(),v=y("div"),m=y("button"),m.innerHTML='<strong class="svelte-1rikuya">Button</strong> <span class="svelte-1rikuya">Call a Home Assistant service</span>',w=E(),g(s,"class","icon svelte-1rikuya"),g(a,"class","svelte-1rikuya"),g(n,"class","room-meta svelte-1rikuya"),g(m,"type","button"),g(m,"class","svelte-1rikuya"),g(v,"class","object-choices svelte-1rikuya"),g(t,"class","svelte-1rikuya"),pe(t,"selected",e[9].id===e[2])},m(R,P){O(R,t,P),p(t,n),p(n,s),M[i].m(s,null),p(n,l),p(n,c),p(c,a),p(a,d),p(c,h),k&&k.m(c,null),p(t,b),p(t,v),p(v,m),p(t,w),_=!0,f||(I=V(m,"click",L),f=!0)},p(R,P){e=R;let T=i;i=S(e,P),i===T?M[i].p(e,P):(ae(),N(M[T],1,1,()=>{M[T]=null}),ue(),r=M[i],r?r.p(e,P):(r=M[i]=q[i](e),r.c()),A(r,1),r.m(s,null)),(!_||P&2)&&u!==(u=e[9].title+"")&&Z(d,u),e[9].description?k?k.p(e,P):(k=Fn(e),k.c(),k.m(c,null)):k&&(k.d(1),k=null),(!_||P&6)&&pe(t,"selected",e[9].id===e[2])},i(R){_||(A(r),_=!0)},o(R){N(r),_=!1},d(R){R&&C(t),M[i].d(),k&&k.d(),f=!1,I()}}}function kr(e){let t,n,s=e[0]&&Dn(e);return{c(){s&&s.c(),t=Pe()},m(o,i){s&&s.m(o,i),O(o,t,i),n=!0},p(o,[i]){o[0]?s?(s.p(o,i),i&1&&A(s,1)):(s=Dn(o),s.c(),A(s,1),s.m(t.parentNode,t)):s&&(ae(),N(s,1,1,()=>{s=null}),ue())},i(o){n||(A(s),n=!0)},o(o){N(s),n=!1},d(o){o&&C(t),s&&s.d(o)}}}function Sr(e,t,n){let{open:s=!1}=t,{rooms:o=[]}=t,{activeRoomId:i=null}=t;const r=ge();function l(){r("close")}function c(h){h.target===h.currentTarget&&l()}function a(h){r("create",{roomId:h,type:"button"})}const u=h=>!!(h&&h.includes(":")),d=h=>a(h.id);return e.$$set=h=>{"open"in h&&n(0,s=h.open),"rooms"in h&&n(1,o=h.rooms),"activeRoomId"in h&&n(2,i=h.activeRoomId)},[s,o,i,l,c,a,u,d]}class Ir extends de{constructor(t){super(),fe(this,t,Sr,kr,ie,{open:0,rooms:1,activeRoomId:2})}}function Bn(e,t,n){const s=e.slice();return s[24]=t[n],s}function Er(e){let t;return{c(){t=y("div"),t.innerHTML="<h2>No rooms defined</h2> <p>Update your dashboard configuration to add rooms.</p>",g(t,"class","empty-state svelte-1jvwue9")},m(n,s){O(n,t,s)},p:F,i:F,o:F,d(n){n&&C(t)}}}function jr(e){let t,n=[],s=new Map,o,i,r=e[2].objects.length===0&&zn(e),l=me(e[2].objects);const c=a=>a[24].id;for(let a=0;a<l.length;a+=1){let u=Bn(e,l,a),d=c(u);s.set(d,n[a]=Vn(d,u))}return{c(){r&&r.c(),t=E();for(let a=0;a<n.length;a+=1)n[a].c();o=Pe()},m(a,u){r&&r.m(a,u),O(a,t,u);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(a,u);O(a,o,u),i=!0},p(a,u){a[2].objects.length===0?r?r.p(a,u):(r=zn(a),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null),u&1604&&(l=me(a[2].objects),ae(),n=Rs(n,u,c,1,a,l,s,o.parentNode,Ts,Vn,o,Bn),ue())},i(a){if(!i){for(let u=0;u<l.length;u+=1)A(n[u]);i=!0}},o(a){for(let u=0;u<n.length;u+=1)N(n[u]);i=!1},d(a){a&&(C(t),C(o)),r&&r.d(a);for(let u=0;u<n.length;u+=1)n[u].d(a)}}}function zn(e){let t,n,s=e[2].title+"",o,i,r;function l(u,d){return u[6]?Mr:Cr}let c=l(e),a=c(e);return{c(){t=y("div"),n=y("h2"),o=$(s),i=E(),r=y("p"),a.c(),g(t,"class","empty-state svelte-1jvwue9")},m(u,d){O(u,t,d),p(t,n),p(n,o),p(t,i),p(t,r),a.m(r,null)},p(u,d){d&4&&s!==(s=u[2].title+"")&&Z(o,s),c!==(c=l(u))&&(a.d(1),a=c(u),a&&(a.c(),a.m(r,null)))},d(u){u&&C(t),a.d()}}}function Cr(e){let t;return{c(){t=$("No objects yet. Enable edit mode to start customizing this room.")},m(n,s){O(n,t,s)},d(n){n&&C(t)}}}function Mr(e){let t,n,s;return{c(){t=$("Use "),n=y("strong"),n.textContent="Add object",s=$(" to place your first control in this room.")},m(o,i){O(o,t,i),O(o,n,i),O(o,s,i)},d(o){o&&(C(t),C(n),C(s))}}}function Or(e){let t,n,s;function o(){return e[18](e[24])}return t=new gs({props:{object:e[24],editMode:e[6]}}),t.$on("edit",o),{c(){ne(t.$$.fragment),n=E()},m(i,r){x(t,i,r),O(i,n,r),s=!0},p(i,r){e=i;const l={};r&4&&(l.object=e[24]),r&64&&(l.editMode=e[6]),t.$set(l)},i(i){s||(A(t.$$.fragment,i),s=!0)},o(i){N(t.$$.fragment,i),s=!1},d(i){i&&C(n),ee(t,i)}}}function Vn(e,t){let n,s,o;function i(...r){return t[19](t[24],...r)}return s=new _i({props:{id:t[24].id,x:t[24].x,y:t[24].y,width:t[24].width,height:t[24].height,$$slots:{default:[Or]},$$scope:{ctx:t}}}),s.$on("move",i),{key:e,first:null,c(){n=Pe(),ne(s.$$.fragment),this.first=n},m(r,l){O(r,n,l),x(s,r,l),o=!0},p(r,l){t=r;const c={};l&4&&(c.id=t[24].id),l&4&&(c.x=t[24].x),l&4&&(c.y=t[24].y),l&4&&(c.width=t[24].width),l&4&&(c.height=t[24].height),l&134217796&&(c.$$scope={dirty:l,ctx:t}),s.$set(c)},i(r){o||(A(s.$$.fragment,r),o=!0)},o(r){N(s.$$.fragment,r),o=!1},d(r){r&&C(n),ee(s,r)}}}function Tr(e){let t,n,s,o;const i=[jr,Er],r=[];function l(c,a){return c[2]?0:1}return n=l(e),s=r[n]=i[n](e),{c(){t=y("div"),s.c(),g(t,"class","canvas-wrapper svelte-1jvwue9")},m(c,a){O(c,t,a),r[n].m(t,null),o=!0},p(c,a){let u=n;n=l(c),n===u?r[n].p(c,a):(ae(),N(r[u],1,1,()=>{r[u]=null}),ue(),s=r[n],s?s.p(c,a):(s=r[n]=i[n](c),s.c()),A(s,1),s.m(t,null))},i(c){o||(A(s),o=!0)},o(c){N(s),o=!1},d(c){c&&C(t),r[n].d()}}}function Rr(e){let t,n,s,o,i,r;return t=new Ko({props:{connectionState:e[4],connectionMessage:e[3]??"",editMode:e[6],rooms:e[7],sidebar:e[8],activeRoomId:e[5],$$slots:{default:[Tr]},$$scope:{ctx:e}}}),t.$on("selectRoom",e[20]),t.$on("toggleEdit",e[21]),t.$on("addObject",e[22]),s=new _r({props:{editing:e[1]}}),s.$on("close",di),s.$on("save",e[11]),s.$on("remove",e[12]),i=new Ir({props:{open:e[0],rooms:e[7],activeRoomId:e[5]}}),i.$on("close",e[23]),i.$on("create",e[13]),{c(){ne(t.$$.fragment),n=E(),ne(s.$$.fragment),o=E(),ne(i.$$.fragment)},m(l,c){x(t,l,c),O(l,n,c),x(s,l,c),O(l,o,c),x(i,l,c),r=!0},p(l,[c]){const a={};c&16&&(a.connectionState=l[4]),c&8&&(a.connectionMessage=l[3]??""),c&64&&(a.editMode=l[6]),c&128&&(a.rooms=l[7]),c&256&&(a.sidebar=l[8]),c&32&&(a.activeRoomId=l[5]),c&134217796&&(a.$$scope={dirty:c,ctx:l}),t.$set(a);const u={};c&2&&(u.editing=l[1]),s.$set(u);const d={};c&1&&(d.open=l[0]),c&128&&(d.rooms=l[7]),c&32&&(d.activeRoomId=l[5]),i.$set(d)},i(l){r||(A(t.$$.fragment,l),A(s.$$.fragment,l),A(i.$$.fragment,l),r=!0)},o(l){N(t.$$.fragment,l),N(s.$$.fragment,l),N(i.$$.fragment,l),r=!1},d(l){l&&(C(n),C(o)),ee(t,l),ee(s,l),ee(i,l)}}}function Ar(e,t,n){let s,o,i,r,l,c,a,u,d,h,b,v;oe(e,Ve,T=>n(5,l=T)),oe(e,$e,T=>n(14,c=T)),oe(e,ce,T=>n(15,a=T)),oe(e,we,T=>n(16,u=T)),oe(e,ti,T=>n(17,d=T)),oe(e,zt,T=>n(6,h=T)),oe(e,hs,T=>n(7,b=T)),oe(e,ei,T=>n(8,v=T));let m=!1;Lt(()=>{ri(),sr()});function w(T,Y){s&&ci(s.id,Y,T.detail.x,T.detail.y)}function _(T){s&&fi(s.id,T)}function f(T){o&&hi({roomId:o.roomId,object:T.detail,isNew:o.isNew})}function I(){o&&pi(o.roomId,o.object.id)}function q(T){n(0,m=!1);const{roomId:Y,type:H}=T.detail;ui(Y,H),l!==Y&&Cn(Y)}const M=T=>_(T.id),S=(T,Y)=>w(Y,T.id),k=T=>Cn(T.detail),L=()=>li(),R=()=>n(0,m=!0),P=()=>n(0,m=!1);return e.$$.update=()=>{e.$$.dirty&131072&&n(2,s=d),e.$$.dirty&65536&&n(1,o=u),e.$$.dirty&32768&&n(4,i=a),e.$$.dirty&16384&&n(3,r=c)},[m,o,s,r,i,l,h,b,v,w,_,f,I,q,c,a,u,d,M,S,k,L,R,P]}class Pr extends de{constructor(t){super(),fe(this,t,Ar,Rr,ie,{})}}const bs=document.getElementById("app");if(!bs)throw new Error("Failed to find mount point");new Pr({target:bs});
